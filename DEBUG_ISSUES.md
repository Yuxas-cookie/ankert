# デバッグ中に発見された問題

## 記録フォーマット

```markdown
### [ID] [日時] [グループ] - [問題の概要]
- **重要度**: 🔴高 / 🟡中 / 🟢低
- **影響範囲**: 
- **発生条件**: 
- **エラー内容**: 
- **スタックトレース**: 
- **再現手順**: 
- **暫定対処**: 
- **根本対処**: 
- **ステータス**: 🔄対応中 / ✅解決済み / ⏸️保留
- **担当**: グループX
```

---

## 既知の問題

### [001] 2025/06/12 共通 - 無限ループエラー（useAutoSave）
- **重要度**: 🔴高
- **影響範囲**: アンケート編集ページ
- **発生条件**: 編集ページを開いた時
- **エラー内容**: Maximum update depth exceeded
- **スタックトレース**: 
  ```
  Error: Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate.
  ```
- **再現手順**: 
  1. アンケート編集ページにアクセス
  2. エラーが発生
- **暫定対処**: useAutoSaveを一時的に無効化
- **根本対処**: 依存配列の修正が必要
- **ステータス**: 🔄対応中
- **担当**: グループ1

### [002] 2025/06/12 グループ1 - アンケート編集アクセス不可
- **重要度**: 🟡中
- **影響範囲**: アンケート編集機能のエラーハンドリング
- **発生条件**: 他のユーザーが作成したアンケートの編集ページにアクセス
- **エラー内容**: データが取得できない（エラーメッセージが不適切）
- **スタックトレース**: なし
- **再現手順**: 
  1. gungamwing@gmail.comで作成されたアンケート
  2. test@example.comでログイン
  3. 編集ページ（/surveys/[id]/edit）にアクセス
  4. データが表示されない
- **暫定対処**: RLSは正しく動作している
- **根本対処**: 
  - 編集権限がない場合の適切なエラーメッセージ表示
  - アンケート一覧へのリダイレクト実装
  - 編集ボタンの表示条件を修正（自分のアンケートのみ）
- **ステータス**: 🔄対応中
- **担当**: グループ1

---

### [003] 2025/06/12 グループ3 - ハードコードされた色の使用
- **重要度**: 🟡中
- **影響範囲**: テーマ切り替え機能
- **発生条件**: ライト/ダークモード切り替え時
- **問題内容**: 複数のコンポーネントでハードコードされた色が使用されていた
- **詳細**:
  - text-white, bg-black などの固定色クラス
  - #FFFFFF, #5E5CE6 などの16進数カラーコード
  - ライト/ダークモードで適切に切り替わらない
- **修正内容**: 
  - すべてのハードコードされた色をCSS変数に置換
  - Tailwindのテーマ対応クラスを使用
  - 修正ファイル: page.tsx, cosmic-button.tsx, futuristic-button.tsx, cosmic-theme-toggle.tsx
- **ステータス**: ✅解決済み
- **担当**: グループ3

---

## 解決済みの問題

### [000] 2025/06/12 共通 - Supabase認証エラー
- **重要度**: 🔴高
- **影響範囲**: 全ユーザーのログイン
- **発生条件**: ログイン試行時
- **エラー内容**: Database error saving new user
- **暫定対処**: -
- **根本対処**: トリガーとRLSポリシーを修正
- **ステータス**: ✅解決済み
- **担当**: 初期対応

---

## 問題の優先順位

### 🔴 至急対応が必要
1. [001] 無限ループエラー
2. [002] アンケート編集アクセス不可

### 🟡 重要だが回避策あり
（現在なし）

### 🟢 改善の余地あり
（現在なし）

---

*新しい問題を発見した場合は、このファイルに追記してください。*