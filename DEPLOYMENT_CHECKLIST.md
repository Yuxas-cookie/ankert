# デプロイメントチェックリスト

## GitHub アップロード前の確認事項

### セキュリティ
- [ ] `.env.local`ファイルが`.gitignore`に含まれている
- [ ] APIキーやシークレットがハードコードされていない
- [ ] Service Role Keyがクライアント側で使用されていない

### コード品質
- [ ] `npm run build`が成功する
- [ ] `npm run typecheck`でTypeScriptエラーがない
- [ ] `npm run lint`でESLintエラーがない

### 環境変数
- [ ] `.env.local.example`が最新の状態
- [ ] `.env.production.example`が作成されている
- [ ] 必要な環境変数がすべて文書化されている

### ドキュメント
- [ ] README.mdが更新されている
- [ ] DEPLOYMENT_GUIDE.mdが作成されている
- [ ] 必要に応じてCLAUDE.mdが更新されている

## Vercel デプロイ前の確認事項

### Supabase設定
- [ ] 本番用のSupabaseプロジェクトが作成されている
- [ ] マイグレーションがすべて適用されている
- [ ] RLS（Row Level Security）が有効になっている
- [ ] 認証プロバイダーが設定されている

### 環境変数（Vercel）
- [ ] `NEXT_PUBLIC_SUPABASE_URL`が設定されている
- [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY`が設定されている
- [ ] カスタムドメインの場合は`NEXT_PUBLIC_APP_URL`も設定

### Supabase認証設定
- [ ] Site URLが本番URLに設定されている
- [ ] Redirect URLsに本番URLが追加されている
- [ ] メール認証が有効化されている（必要な場合）

### パフォーマンス
- [ ] 不要な`console.log`が削除されている
- [ ] 画像が最適化されている
- [ ] 大きなライブラリが動的インポートされている

### 機能テスト
- [ ] ユーザー登録・ログインが動作する
- [ ] アンケート作成が動作する
- [ ] アンケート回答が動作する
- [ ] データの保存・読み込みが正常に動作する

## デプロイ後の確認事項

### 動作確認
- [ ] 本番URLでアプリケーションにアクセスできる
- [ ] ログイン・ログアウトが正常に動作する
- [ ] アンケートの作成・編集・削除が動作する
- [ ] レスポンシブデザインが正しく表示される
- [ ] ダークモード切り替えが動作する

### モニタリング
- [ ] Vercel Analyticsが有効になっている
- [ ] エラーログを確認する
- [ ] パフォーマンスメトリクスを確認する

### セキュリティ
- [ ] HTTPSが有効になっている
- [ ] セキュリティヘッダーが設定されている
- [ ] 環境変数が外部に露出していない

## 問題が発生した場合

1. Vercelのデプロイログを確認
2. ブラウザのコンソールでエラーを確認
3. Supabaseのログを確認
4. 必要に応じて前のバージョンにロールバック

---

最終確認日: 2025年6月13日